---

## 🎯 Step 1: 과외 중개 플랫폼의 전체 도메인 및 흐름 정리

> “실제 유저 플로우를 중심으로 전체 도메인과 주요 유스케이스를 정의하여, 이후 모든 TDD 시나리오의 기준점이 되는 도메인 구조를 정리한다.”

---

### 🧭 STICC 기반 미션 세트

* **Situation**: 우리는 "과외 중개 플랫폼"을 만들고 있으며, 도메인/엔티티가 분리된 멀티모듈 환경에서 TDD를 적용할 계획입니다.
* **Task**: 실무 플로우 기준으로 어떤 도메인 모델이 필요하고, 어떤 유스케이스 흐름이 존재하는지를 구조적으로 명세해야 합니다.
* **Intent**: 이후 TDD 학습에서 흔들리지 않도록 “전체 시스템의 기능 흐름과 도메인 간 관계”를 명확히 해두는 것이 목적입니다.
* **Concerns**: 도메인-엔티티 간 관계, OneToMany 매핑 전략, JPA 의존도 등을 고려한 설계여야 합니다.
* **Calibration**: 이 구조는 향후 25개의 Step에서 모든 클래스와 테스트의 뼈대가 됩니다. 충분히 정교해야 하며, 이후 각 Step에서 지속적으로 확장/보완될 수 있습니다.

---

### 🛠 \[작업 지시] Instruction

이번 Step에서는 아래 내용을 명확히 정리합니다:

1. **플로우 기준 도메인 흐름 정의**

    * 유저 흐름 기반 유스케이스 시퀀스를 다음처럼 도식화합니다:

      ```
      [선생님 등록] → [클래스 등록] → [학생 신청] → [신청 승인] → [결제] → [수강 완료] → [리뷰 작성]
      ```

2. **초기 도메인 모델 목록 정의 (Domain + JPA Entity 모두 고려)**

    * 아래는 초기 구조로 제안하는 도메인 목록입니다. 구조상 `도메인 객체`와 `엔티티 객체`는 분리됩니다.

      ```
      📦 domain
      ┣ Teacher
      ┣ TeachingClass
      ┣ Student
      ┣ ClassApplication
      ┣ Payment
      ┣ Review
      ┣ ClassRecord
      ```

      ```
      📦 persistence
      ┣ TeacherEntity
      ┣ TeachingClassEntity
      ┣ StudentEntity
      ┣ ClassApplicationEntity
      ┣ PaymentEntity
      ┣ ReviewEntity
      ┣ ClassRecordEntity
      ```

3. **각 도메인 간 주요 관계 및 연관**

    * 연관관계 예시 (초기 스케치)

      ```
      Teacher ---1:N---> TeachingClass
      TeachingClass ---1:N---> ClassApplication
      ClassApplication ---1:1---> Payment
      TeachingClass ---1:N---> Review
      ```

4. **유스케이스 중심 서비스 흐름 요약**

    * 어떤 유스케이스가 어떤 서비스에서 구현될지를 대략적으로 정리합니다:

      | 유스케이스  | 서비스                  | 설명                   |
            |--------|----------------------|----------------------|
      | 선생님 등록 | TeacherService       | Command 기반 등록        |
      | 클래스 등록 | TeachingClassService | 특정 Teacher 기준 클래스 등록 |
      | 클래스 신청 | ApplicationService   | 학생이 클래스에 신청          |
      | 신청 승인  | ApplicationService   | 상태 변경 + 이벤트 발생       |
      | 결제 요청  | PaymentService       | 신청 승인 후 자동 요청        |
      | 수강 완료  | RecordService        | 수강 기간이 지나면 자동 처리     |
      | 리뷰 작성  | ReviewService        | 수강 완료 조건 하 리뷰 작성     |

---

### ✅ Clear Completion Criteria

* 아래 항목을 스스로 정의하거나 확인하면 Step 1 완료입니다:

    1. 전체 유저 플로우 기반 유스케이스를 시퀀스로 정리했다
    2. 각 유스케이스에 대해 관련 도메인 모델을 명확히 했다
    3. 초기 연관관계 구조를 정의했다
    4. 각 서비스가 담당할 유스케이스 책임을 나눴다
    5. 엔티티 ↔ 도메인 분리 전략이 전제되었음을 인지하고 있다

---

### 💡 Strategic Hint

* **Teacher ↔ TeachingClass** 관계는 OneToMany 구조지만, `수정 가능성`이 높은 리스트입니다. 따라서 이후 Step에서 **명시적 재생성 전략**을 채택하게 됩니다.
* **Application ↔ Payment**는 1:1 관계이며, 상태 전이의 흐름이 핵심입니다. 이 부분에서 트랜잭션 분리 전략도 등장하게 됩니다.
* 초기 설계는 이후에 `도메인 캡슐화`, `이벤트 분리`, `식별자 기준 참조` 전략을 실습하는 기반이 됩니다.

---

### 🧠 Expert Micro-Sequence

시니어 백엔드 개발자는 이런 순서로 사고합니다:

1. **유저 플로우 기준 유스케이스 시퀀스 도출**
2. 각 유스케이스에 대응하는 도메인 개념 명명 → 동사/명사로 나누기
3. 상태 기반 연관 구조 정의 (OneToMany/1:1)
4. 도메인 설계는 불변 중심, 엔티티는 변경 중심으로 구분
5. 도메인 책임 단위별로 서비스 계층 나누기

---

### 🔁 자기 피드백 루틴

* 이 도메인 흐름에서 **가장 어색하거나 자신 없는 관계는 무엇인가요?**
* 도메인 객체와 엔티티 객체의 책임을 **어디까지 분리해야 할지 아직 모호한 부분이 있다면?**
* 전체 유스케이스 중 **테스트 관점에서 가장 설계가 복잡해 보이는 부분은 어디인가요?**

---
